# HTTP
### 概念
* 该协议位于应用层
* HTTP 是基于 TCP/IP 协议的应用层协议
### 版本发展
1. HTTP/0.9
   * 规定了客户端和服务器之间的通信格式
   * 规定端口80
   * 只有get请求
   * 服务器只能回应HTML格式的字符串
2. HTTP/1.0
   * 任何格式的内容都可以发送
   * 增加POST和HEAD请求
   * HTTP请求和回应的格式改变。增加头信息（HTTP header）
   * 增加状态码、内容编码等
   * 缺点：每个TCP连接只能发送一个请求，再请求还需要重新建立连接
3. HTTP/1.1【目前】
   * 允许复用TCP连接，但是同一个TCP连接里面，所有的数据通信是按次序进行的。服务器只有处理完一个回应，才会进行下一个回应。要是前面的回应特别慢，后面就会有许多请求排队等着。这称为"队头堵塞"（Head-of-line blocking）。
   * 为了避免这个问题，只有两种方法：一是减少请求数，二是同时多开持久连接。这导致了很多的网页优化技巧，比如合并脚本和样式表、将图片嵌入CSS代码、域名分片（domain sharding）等等。
### URL组成部分
```
 http://www.aspxfans.com:8080/news/index.asp?boardID=5&ID=24618&page=1#name
```
* 协议
```
 http://
```
* 主机名
```
www.aspxfans.com
```
* 端口
```
:8080
```
* 资源位置
```
/news/index.asp
```
* 参数部分【非必需】
```
?boardID=5&ID=24618&page=1
```
* 锚点【非必需】
  * 加上锚点可以指定到页面上的某个元素
```
#name
```

### HTTP请求响应模型
* HTTP由请求和响应构成，是一个标准的客户端服务器模型（B/S）
* HTTP协议永远都是客户端发起请求，服务器回送响应
* HTTP是一个无状态的协议
  * 意味着当一个客户端向服务器端发出请求，然后服务器返回响应(response)，连接就被关闭了，在服务器端不保留连接的有关信息.
  * 如果浏览器或者服务器在其头信息加入了这行代码Connection:keep-aliveTCP连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。
* HTTP工作过程
  1. 浏览器: 输入URL
  2. DNS域名解析: 域名与IP映射
  3. 建立TCP连接: TCP三次握手
  4. 发送HTTP Request: 请求信息
  5. Web服务器接收请求
  6. 应用服务器处理业务逻辑
  7. 关闭TCP连接: 请求响应完成
  8. 浏览器: 渲染响应页面

### HTTP特点
* 简单快速
* 灵活
* 无连接
  * HTTP的无连接是指整个网站的浏览过程, 业务性架构无连接，但请求与响应是依赖于TCP有连接的
* 无状态
  1. 意味着每个请求都是独立的
  2. 服务器不知道每次访问者是谁
     * 解决：cookie、session


